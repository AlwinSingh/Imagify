Object.defineProperty(exports, '__esModule', { value: true });

var React = require('react');

function ReactDrag(_a) {
    var images = _a.images, styles = _a.styles, onDragFinish = _a.onDragFinish, _b = _a.opacity, opacity = _b === void 0 ? 0.5 : _b, ref = _a.ref, _c = _a.customWrapperClass, customWrapperClass = _c === void 0 ? [] : _c, _d = _a.customImageClass, customImageClass = _d === void 0 ? [] : _d;
    var drageSrcEl = null;
    var handleDragStart = function (e) {
        drageSrcEl = e.target;
        e.dataTransfer.effectAllowed = "move";
        e.dataTransfer.setData('text/html', e.target.src);
    };
    var handleDrageEnter = function (e) {
        e.preventDefault();
        e.stopPropagation();
    };
    var handleDragLeave = function (e) {
        e.preventDefault();
        e.stopPropagation();
        drageSrcEl.style.opacity = opacity;
    };
    var handleDragOver = function (e) {
        if (e.preventDefault) {
            e.preventDefault();
        }
        e.dataTransfer.dropEffect = "move";
    };
    var handleDrop = function (e) {
        if (e.stopPropagation) {
            e.stopPropagation();
        }
        if (drageSrcEl && drageSrcEl.src != e.target.src) {
            var dragged = drageSrcEl.src;
            var replaced = e.target.src;
            drageSrcEl.src = e.target.src;
            e.target.src = dragged;
            e.target.style.opacity = 1;
            drageSrcEl.style.opacity = 1;
            var draggedId = drageSrcEl.id;
            var replacedId = e.target.id;
            var responseObj = {
                draggedFile: {
                    index: Number(draggedId),
                    src: dragged
                },
                replacedFile: {
                    index: Number(replacedId),
                    src: replaced
                }
            };
            return onDragFinish(responseObj);
        }
    };
    return (React.createElement("div", { ref: ref, className: customWrapperClass.join(' ') }, images.map(function (im, id) { return (React.createElement("img", { src: im, alt: "new image", style: styles, draggable: true, className: customImageClass.join(' '), id: id.toString(), key: im + id.toString(), onDragStart: handleDragStart, onDrop: handleDrop, onDragOver: handleDragOver, onDragEnter: handleDrageEnter, onDragLeave: handleDragLeave })); })));
}

exports.default = ReactDrag;
//# sourceMappingURL=index.js.map
